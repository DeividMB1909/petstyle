<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <title>PetStyle - Bienvenida</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <style id="app-style">
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
      -webkit-tap-highlight-color: transparent;
    }

    :root {
      --purple: #9370DB;
      --pink: #FFB6C1;
      --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      --gradient-bg: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
      --shadow-primary: 0 10px 30px rgba(102, 126, 234, 0.3);
      --shadow-secondary: 0 5px 15px rgba(102, 126, 234, 0.2);
    }

    body {
      background: #ffffff;
      overflow: hidden;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }

    /* Floating particles background with colorful pet icons */
    body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 20% 80%, rgba(147, 112, 219, 0.03) 0%, transparent 50%),
                  radial-gradient(circle at 80% 20%, rgba(255, 182, 193, 0.03) 0%, transparent 50%),
                  radial-gradient(circle at 40% 40%, rgba(102, 126, 234, 0.02) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }

    .container {
      position: relative;
      width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      z-index: 1;
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }

    .pet-animation {
      position: relative;
      width: min(90vw, 500px);
      height: min(70vh, 500px);
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 0 auto;
    }

    /* Background floating icons */
    .floating-icons {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    .floating-icon {
      position: absolute;
      opacity: 0.1;
      animation: float 8s ease-in-out infinite;
      width: clamp(20px, 4vw, 40px);
      height: clamp(20px, 4vw, 40px);
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(180deg); }
    }

    .shape {
      position: absolute;
      opacity: 0;
      transform: scale(0);
      width: clamp(50px, 15vw, 90px);
      height: clamp(50px, 15vw, 90px);
      filter: drop-shadow(0 8px 20px rgba(0,0,0,0.15));
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .shape svg {
      width: 100%;
      height: 100%;
    }

    .shape:hover {
      filter: drop-shadow(0 12px 25px rgba(0,0,0,0.25));
      transform: scale(1.1);
    }

    .pet-outline {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: min(80vw, 400px);
      height: min(60vh, 400px);
      opacity: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      filter: drop-shadow(0 8px 25px rgba(0,0,0,0.2));
    }

    .pet-silhouette {
      width: 100%;
      height: 100%;
      object-fit: contain;
      filter: brightness(0) saturate(100%) invert(1);
      opacity: 0.9;
    }

    .continue-btn {
      background: var(--gradient-secondary);
      background-size: 200% 200%;
      color: white;
      border: none;
      padding: clamp(14px, 4vw, 18px) clamp(28px, 8vw, 40px);
      font-size: clamp(16px, 4.5vw, 20px);
      font-weight: 600;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: var(--shadow-primary);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      opacity: 0;
      transform: translateY(30px);
      letter-spacing: 1px;
      text-transform: uppercase;
      position: relative;
      overflow: hidden;
      min-width: clamp(140px, 35vw, 200px);
      animation: buttonGlow 3s ease-in-out infinite alternate;
    }

    @keyframes buttonGlow {
      0% { box-shadow: var(--shadow-primary); }
      100% { box-shadow: 0 15px 40px rgba(245, 87, 108, 0.4); }
    }

    .continue-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: all 0.6s;
    }

    .continue-btn:hover::before {
      left: 100%;
    }

    .continue-btn:hover {
      background-position: 100% 0;
      box-shadow: 0 20px 50px rgba(245, 87, 108, 0.5);
      transform: translateY(25px) scale(1.05);
    }

    .continue-btn:active {
      transform: translateY(27px) scale(1.02);
      box-shadow: 0 10px 25px rgba(245, 87, 108, 0.6);
    }

    .logo {
      position: absolute;
      top: clamp(20px, 8vh, 60px);
      font-size: clamp(28px, 8vw, 48px);
      font-weight: 800;
      background: linear-gradient(45deg, #667eea, #764ba2, #f093fb);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      text-align: center;
      opacity: 0;
      transform: translateY(-30px);
      width: 100%;
      text-shadow: 0 4px 8px rgba(0,0,0,0.1);
      animation: logoShimmer 4s ease-in-out infinite;
    }

    @keyframes logoShimmer {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .transition-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--gradient-primary);
      opacity: 0;
      pointer-events: none;
      z-index: 9999;
      border-radius: 50%;
      transform: scale(0);
    }

    /* Mobile optimizations */
    @media (max-width: 768px) {
      .container {
        padding: 20px 15px;
        gap: clamp(20px, 5vh, 40px);
      }

      .pet-animation {
        width: min(85vw, 400px);
        height: min(60vh, 400px);
      }

      .shape {
        width: clamp(40px, 15vw, 80px);
        height: clamp(40px, 15vw, 80px);
      }

      .pet-outline {
        width: min(75vw, 350px);
        height: min(50vh, 350px);
      }

      .continue-btn {
        margin-bottom: clamp(20px, 5vh, 40px);
        min-height: 50px;
      }

      .logo {
        top: clamp(30px, 6vh, 50px);
      }
    }

    /* Extra small screens */
    @media (max-width: 480px) {
      .pet-animation {
        width: 80vw;
        height: 50vh;
      }

      .pet-outline {
        width: 70vw;
        height: 40vh;
      }

      .shape {
        width: clamp(35px, 18vw, 65px);
        height: clamp(35px, 18vw, 65px);
      }
    }

    /* Landscape mobile */
    @media (max-height: 600px) and (orientation: landscape) {
      .container {
        flex-direction: row;
        gap: 30px;
      }

      .pet-animation {
        width: 50vw;
        height: 70vh;
      }

      .logo {
        position: relative;
        top: 0;
        order: -1;
        margin-bottom: 20px;
      }

      .continue-btn {
        margin-top: 20px;
      }
    }

    /* High DPI displays */
    @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
      .shape {
        filter: drop-shadow(0 4px 8px rgba(0,0,0,0.15)) saturate(1.1);
      }
    }

    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
      :root {
        --shadow-primary: 0 10px 30px rgba(0, 0, 0, 0.5);
        --shadow-secondary: 0 5px 15px rgba(0, 0, 0, 0.3);
      }
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
      
      body::before {
        animation: none;
      }
      
      .logo {
        animation: none;
      }
      
      .continue-btn {
        animation: none;
      }
    }

    /* Focus states for accessibility */
    .continue-btn:focus {
      outline: 3px solid rgba(255, 255, 255, 0.5);
      outline-offset: 4px;
    }

    /* Loading states */
    .loading {
      opacity: 0.7;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="logo">PetStyle</h1>
    
    <!-- Floating background icons -->
    <div class="floating-icons">
      <div class="floating-icon" style="top: 10%; left: 5%; animation-delay: 0s;">ü¶¥</div>
      <div class="floating-icon" style="top: 20%; right: 10%; animation-delay: 1s;">üéæ</div>
      <div class="floating-icon" style="top: 30%; left: 15%; animation-delay: 2s;">ü¶Æ</div>
      <div class="floating-icon" style="top: 40%; right: 20%; animation-delay: 3s;">üè†</div>
      <div class="floating-icon" style="top: 50%; left: 8%; animation-delay: 4s;">ü¶¥</div>
      <div class="floating-icon" style="top: 60%; right: 15%; animation-delay: 5s;">üéΩ</div>
      <div class="floating-icon" style="top: 70%; left: 12%; animation-delay: 6s;">üß∏</div>
      <div class="floating-icon" style="top: 80%; right: 8%; animation-delay: 7s;">ü•é</div>
      <div class="floating-icon" style="top: 15%; left: 80%; animation-delay: 1.5s;">üíä</div>
      <div class="floating-icon" style="top: 35%; left: 85%; animation-delay: 2.5s;">üß¥</div>
      <div class="floating-icon" style="top: 55%; left: 90%; animation-delay: 3.5s;">üè∑Ô∏è</div>
      <div class="floating-icon" style="top: 75%; left: 88%; animation-delay: 4.5s;">ü¶¥</div>
      <div class="floating-icon" style="top: 25%; left: 50%; animation-delay: 0.5s;">üéæ</div>
      <div class="floating-icon" style="top: 65%; left: 45%; animation-delay: 1.8s;">ü¶Æ</div>
      <div class="floating-icon" style="top: 85%; left: 55%; animation-delay: 2.3s;">üß∏</div>
    </div>
    
    <div class="pet-animation">
      <svg class="shape accessory" data-type="collar" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path fill="#9370DB" d="M18,12c0-1.1-0.9-2-2-2h-1V8c0-2.76-2.24-5-5-5S5,5.24,5,8v2H4c-1.1,0-2,0.9-2,2v8c0,1.1,0.9,2,2,2h12
          c1.1,0,2-0.9,2-2v-2h1c1.1,0,2-0.9,2-2v-4H18z M7,8c0-1.66,1.34-3,3-3s3,1.34,3,3v2H7V8z"/>
        <circle fill="#f5f8ff" cx="12" cy="14" r="1.5"/>
      </svg>

      <svg class="shape accessory" data-type="bone" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path fill="#9370DB" d="M8,6.2C8,4.44,6.56,3,4.8,3S1.6,4.44,1.6,6.2c0,1.33,0.8,2.46,1.94,2.96c-0.21,0.42-0.33,0.89-0.33,1.38
          c0,1.76,1.44,3.2,3.2,3.2c0.49,0,0.96-0.12,1.38-0.33c0.5,1.13,1.64,1.92,2.96,1.92c1.76,0,3.2-1.44,3.2-3.2
          c0-1.33-0.8-2.46-1.94-2.96c0.21-0.42,0.33-0.89,0.33-1.38c0-1.76-1.44-3.2-3.2-3.2C8.89,4.67,8.42,4.79,8,5C7.5,3.87,6.36,3.08,5.04,3.08
          V6.2H8z"/>
      </svg>

      <svg class="shape accessory" data-type="paw" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path fill="#9370DB" d="M8.35,3C7.58,3,6.81,3.63,6.35,5.03C5.89,6.43,6.04,8.35,6.8,9.13C7.57,9.91,8.72,9.35,9.17,7.95
          C9.63,6.55,9.12,3.77,8.35,3z M15.65,3c-0.77,0-1.28,2.78-0.83,4.18c0.45,1.4,1.6,1.96,2.37,1.18c0.76-0.78,0.91-2.7,0.45-4.1
          C17.19,3.63,16.42,3,15.65,3z M3,7.6C2.42,8.45,2.42,9.89,3,10.73c0.58,0.84,1.59,1.11,2.25,0.59c0.66-0.52,0.72-1.63,0.15-2.47
          C4.83,7.99,3.66,6.74,3,7.6z M21,7.6c-0.66-0.86-1.83,0.39-2.4,1.24c-0.57,0.85-0.51,1.95,0.15,2.47c0.66,0.52,1.67,0.25,2.25-0.59
          C21.58,9.89,21.58,8.45,21,7.6z M9,13c-3,0-4,5-4,5c0,0.31,0.09,0.57,0.26,0.77c0.8,1.1,2.85,0.84,5.74,0.84c2.89,0,4.94,0.26,5.74-0.84
          C16.91,18.57,17,18.31,17,18C17,18,16,13,13,13C13,13,10,13,9,13z"/>
      </svg>

      <svg class="shape accessory" data-type="brush" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path fill="#9370DB" d="M18,12c-0.55,0-1,0.45-1,1c0,0.55,0.45,1,1,1s1-0.45,1-1C19,12.45,18.55,12,18,12z M12,12c-0.55,0-1,0.45-1,1
          c0,0.55,0.45,1,1,1s1-0.45,1-1C13,12.45,12.55,12,12,12z M6,12c-0.55,0-1,0.45-1,1c0,0.55,0.45,1,1,1s1-0.45,1-1C7,12.45,6.55,12,6,12z 
          M18,6c-0.55,0-1,0.45-1,1c0,0.55,0.45,1,1,1s1-0.45,1-1C19,6.45,18.55,6,18,6z M12,6c-0.55,0-1,0.45-1,1c0,0.55,0.45,1,1,1s1-0.45,1-1
          C13,6.45,12.55,6,12,6z M6,6C5.45,6,5,6.45,5,7c0,0.55,0.45,1,1,1s1-0.45,1-1C7,6.45,6.55,6,6,6z M18,18c-0.55,0-1,0.45-1,1
          c0,0.55,0.45,1,1,1s1-0.45,1-1C19,18.45,18.55,18,18,18z M12,18c-0.55,0-1,0.45-1,1c0,0.55,0.45,1,1,1s1-0.45,1-1
          C13,18.45,12.55,18,12,18z M6,18c-0.55,0-1,0.45-1,1c0,0.55,0.45,1,1,1s1-0.45,1-1C7,18.45,6.55,18,6,18z"/>
      </svg>

      <svg class="shape accessory" data-type="leash" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path fill="#9370DB" d="M12,2C8.14,2,5,5.14,5,9c0,5.25,7,13,7,13s7-7.75,7-13C19,5.14,15.86,2,12,2z M7,9c0-2.76,2.24-5,5-5s5,2.24,5,5
          c0,0.5-0.1,1.03-0.22,1.57c-0.81-0.1-1.53,0.1-2.75,0.78C12.4,12.27,10.23,12.7,9,12c-2-0.4-2-2.4-2-3z"/>
        <path fill="#9370DB" d="M14.78,14.58c1.27-1.11,2.83-1.36,3.7-0.58C19.34,14.8,19.4,16.39,18.24,17.7
          c-1.16,1.31-3.06,1.95-4.32,1.07c-1.26-0.88-1.25-2.45-0.09-3.76C14.04,14.7,14.32,14.45,14.78,14.58z"/>
      </svg>

      <svg class="shape accessory" data-type="bowl" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path fill="#9370DB" d="M20,7h-2V5h-2v2H8V5H6v2H4C2.9,7,2,7.9,2,9v11c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V9C22,7.9,21.1,7,20,7z
          M10,11c0,0.55-0.45,1-1,1S8,11.55,8,11s0.45-1,1-1S10,10.45,10,11z M14,11c0,0.55-0.45,1-1,1s-1-0.45-1-1s0.45-1,1-1
          S14,10.45,14,11z M18,11c0,0.55-0.45,1-1,1s-1-0.45-1-1s0.45-1,1-1S18,10.45,18,11z"/>
      </svg>

      <svg class="shape accessory" data-type="toy" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path fill="#FFB6C1" d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6Z"/>
      </svg>

      <svg class="shape accessory" data-type="treat" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path fill="#FF6B6B" d="M12,2C13.1,2 14,2.9 14,4C14,5.1 13.1,6 12,6C10.9,6 10,5.1 10,4C10,2.9 10.9,2 12,2M21,9V7L15,13L13,15L15,17L21,11V9M10,15L8,13L2,7V9L8,15L10,17L12,15V13L10,15M6,2C7.1,2 8,2.9 8,4C8,5.1 7.1,6 6,6C4.9,6 4,5.1 4,4C4,2.9 4.9,2 6,2M18,2C19.1,2 20,2.9 20,4C20,5.1 19.1,6 18,6C16.9,6 16,5.1 16,4C16,2.9 16.9,2 18,2Z"/>
      </svg>

      <svg class="shape accessory" data-type="bed" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path fill="#4ECDC4" d="M21,10.5C21,10.5 20.75,10.45 20.45,10.35C20.35,10.31 17.64,9.22 12,9.22C6.36,9.22 3.65,10.31 3.55,10.35C3.25,10.45 3,10.5 3,10.5V12L21,12V10.5M3,13V18C3,19.1 3.9,20 5,20H19C20.1,20 21,19.1 21,18V13H3M6,6C7.1,6 8,6.9 8,8S6.9,10 6,10S4,9.1 4,8S4.9,6 6,6M18,6C19.1,6 20,6.9 20,8S19.1,10 18,10S16,9.1 16,8S16.9,6 18,6Z"/>
      </svg>

      <svg class="shape accessory" data-type="comb" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path fill="#9B59B6" d="M3,4V6H4V4H6V6H7V4H9V6H10V4H12V6H13V4H15V6H16V4H18V6H19V4H21V2H3V4M3,8V20H5V8H3M7,8V20H9V8H7M11,8V20H13V8H11M15,8V20H17V8H15M19,8V20H21V8H19Z"/>
      </svg>

      <svg class="shape accessory" data-type="shampoo" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path fill="#E67E22" d="M9,2V4H8V6H16V4H15V2H9M8,8V22H16V8H8M10,10H14V12H10V10M10,14H14V16H10V14M10,18H14V20H10V18Z"/>
      </svg>

      <svg class="shape accessory" data-type="medicine" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path fill="#27AE60" d="M6,3A3,3 0 0,0 3,6V18A3,3 0 0,0 6,21H18A3,3 0 0,0 21,18V6A3,3 0 0,0 18,3H6M6,5H18A1,1 0 0,1 19,6V18A1,1 0 0,1 18,19H6A1,1 0 0,1 5,18V6A1,1 0 0,1 6,5M10,8V11H7V13H10V16H12V13H15V11H12V8H10Z"/>
      </svg>
      
      <!-- Pet outline phase -->
      <div class="pet-outline">
        <div style="width: 200px; height: 200px; background: linear-gradient(45deg, #667eea, #764ba2); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);">
          <span style="font-size: 80px;">üêæ</span>
        </div>
      </div>
    </div>
    
    <button onclick="goToMain()" class="continue-btn">Continuar</button>

<script>
  function goToMain() {
    // Opcional: Puedes agregar aqu√≠ alguna animaci√≥n o mensaje de espera
    setTimeout(function () {
      window.location.href = "pages/main.html";
    }, 1500); // 2000 milisegundos = 2 segundos
  }
</script>
  </div>

  <audio id="bgMusic" preload="auto">
    <source src="https://assets.mixkit.co/music/preview/mixkit-tech-house-vibes-130.mp3" type="audio/mpeg">
  </audio>
  <audio id="popSound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3" type="audio/mpeg">
  </audio>
  <audio id="successSound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3" type="audio/mpeg">
  </audio>
  <audio id="magicSound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-magical-coin-win-1936.mp3" type="audio/mpeg">
  </audio>
  <audio id="cheerSound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-crowd-cheer-609.mp3" type="audio/mpeg">
  </audio>
  <audio id="swooshSound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-cartoon-voice-laugh-343.mp3" type="audio/mpeg">
  </audio>
  <audio id="ding" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3" type="audio/mpeg">
  </audio>

  <div class="transition-overlay"></div>

  <script id="app-script">
    document.addEventListener('DOMContentLoaded', () => {
      const bgMusic = document.getElementById('bgMusic');
      const popSound = document.getElementById('popSound');
      const successSound = document.getElementById('successSound');
      const magicSound = document.getElementById('magicSound');
      const cheerSound = document.getElementById('cheerSound');
      const swooshSound = document.getElementById('swooshSound');
      const ding = document.getElementById('ding');
      const continueBtn = document.querySelector('.continue-btn');
      const shapes = document.querySelectorAll('.shape');
      const petOutline = document.querySelector('.pet-outline');
      const logo = document.querySelector('.logo');
      const overlay = document.querySelector('.transition-overlay');
      
      // Update volume levels with null checks - Duolingo style
      if (bgMusic) bgMusic.volume = 0.1;
      if (popSound) popSound.volume = 0.6;
      if (successSound) successSound.volume = 0.7;
      if (magicSound) magicSound.volume = 0.5;
      if (cheerSound) cheerSound.volume = 0.4;
      if (swooshSound) swooshSound.volume = 0.3;
      if (ding) ding.volume = 0.8;
      
      // Apply vibrant gradient colors to shapes for more visual appeal
      const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#F7DC6F', '#BB8FCE', '#85C1E9'];
      shapes.forEach((shape, index) => {
        const color = colors[index % colors.length];
        const pathElement = shape.querySelector('path');
        if (pathElement) {
          pathElement.setAttribute('fill', color);
        }
      });
      
      // Add click sound to shapes
      shapes.forEach(shape => {
        shape.addEventListener('click', () => {
          if (popSound) {
            popSound.currentTime = 0;
            popSound.play().catch(() => {});
          }
          gsap.to(shape, {
            duration: 0.2,
            scale: 1.3,
            yoyo: true,
            repeat: 1,
            ease: "elastic.out(1, 0.3)"
          });
        });
      });
      
      // Enhanced animation timeline with mobile optimizations
      const timeline = gsap.timeline();
      
      // Phase 1: Shapes animation with improved mobile positioning
      shapes.forEach((shape, index) => {
        const isMobile = window.innerWidth <= 768;
        const angle = (index / shapes.length) * Math.PI * 2;
        const radius = isMobile ? Math.random() * 80 + 100 : Math.random() * 120 + 140;
        const startX = Math.cos(angle) * radius;
        const startY = Math.sin(angle) * radius;
        
        timeline.to(shape, {
          duration: 0.6,
          opacity: 1,
          scale: isMobile ? 1.1 : 1,
          x: startX,
          y: startY,
          rotation: Math.random() * 360,
          ease: "elastic.out(1, 0.5)",
          onStart: () => {
            // Duolingo-style sound effects
            const soundEffects = [popSound, magicSound, ding];
            const randomSound = soundEffects[Math.floor(Math.random() * soundEffects.length)];
            if (randomSound && !window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
              randomSound.currentTime = 0;
              randomSound.play().catch(() => {});
            }
          }
        }, index * 0.15);
      });
      
      // Phase 2: Enhanced transition with rotation
      timeline.to(shapes, {
        duration: 0.8,
        opacity: 0,
        scale: 0.3,
        rotation: "+=180",
        stagger: 0.08,
        delay: 0.6,
        ease: "power2.in"
      });
      
      timeline.to(petOutline, {
        duration: 1,
        opacity: 1,
        scale: 1,
        rotation: 5,
        ease: "elastic.out(1.2, 0.4)",
        onStart: () => {
          if (successSound) {
            successSound.currentTime = 0;
            successSound.play().catch(() => {});
          }
        }
      }, "-=0.4");
      
      // Phase 3: Pet outline enhanced pulsing
      timeline.to(petOutline, {
        duration: 0.8,
        scale: 1.08,
        rotation: -5,
        repeat: 1,
        yoyo: true,
        ease: "sine.inOut"
      });

      // Logo with enhanced mobile animation
      timeline.to(logo, {
        duration: 0.8,
        opacity: 1,
        y: 0,
        scale: window.innerWidth <= 768 ? 1.05 : 1,
        ease: "back.out(2)",
        onStart: () => {
          if (magicSound) {
            magicSound.currentTime = 0;
            magicSound.play().catch(() => {});
          }
        }
      });
      
      // Continue button with enhanced mobile effects and celebration
      timeline.to(continueBtn, {
        duration: 0.8,
        opacity: 1,
        y: 0,
        scale: 1,
        ease: "elastic.out(1, 0.6)",
        onStart: () => {
          if (cheerSound) {
            cheerSound.currentTime = 0;
            cheerSound.play().catch(() => {});
          }
        }
      }, "+=0.2");
      
      // Enhanced touch interactions for mobile
      let touchStartY = 0;
      continueBtn.addEventListener('touchstart', (e) => {
        touchStartY = e.touches[0].clientY;
        gsap.to(continueBtn, {
          duration: 0.1,
          scale: 0.95,
          ease: "power2.out"
        });
      }, { passive: true });

      continueBtn.addEventListener('touchend', (e) => {
        const touchEndY = e.changedTouches[0].clientY;
        const touchDiff = Math.abs(touchStartY - touchEndY);
        
        if (touchDiff < 10) { // Prevent accidental clicks during scroll
          handleContinueClick();
        }
        
        gsap.to(continueBtn, {
          duration: 0.2,
          scale: 1,
          ease: "elastic.out(1, 0.5)"
        });
      }, { passive: true });

      continueBtn.addEventListener('click', handleContinueClick);
      
      function handleContinueClick() {
        // Enhanced click animation
        gsap.to(continueBtn, {
          duration: 0.15,
          scale: 0.9,
          yoyo: true,
          repeat: 1,
          ease: "power2.inOut"
        });
        
        if (successSound) {
          successSound.currentTime = 0;
          successSound.play().catch(() => {});
        }
        
        if (swooshSound) {
          swooshSound.currentTime = 0;
          swooshSound.play().catch(() => {});
        }
        
        // Enhanced overlay transition with mobile optimization
        const tl = gsap.timeline({
          onComplete: () => {
            // Dispatch custom event for parent app to handle
            if (window.parent !== window) {
              window.parent.postMessage({type: 'onContinue'}, '*');
            } else {
              // Fallback for standalone usage
              console.log('Continue clicked - ready to navigate');
            }
          }
        });
        
        tl.to(overlay, {
          duration: 0.8,
          opacity: 1,
          scale: Math.max(window.innerWidth, window.innerHeight) / 10,
          ease: "power2.in"
        })
        .to(overlay, {
          duration: 0.4,
          opacity: 0,
          delay: 0.1
        });
      }
      
      // Background music with user interaction handling
      const playMusic = () => {
        if (bgMusic) {
          bgMusic.play().catch(() => {
            console.log('Background music blocked by browser policy');
          });
        }
      };
      
      // Try to autoplay, fallback to user interaction
      playMusic();
      
      // Enable music on first user interaction
      const enableAudio = () => {
        playMusic();
        document.removeEventListener('touchstart', enableAudio);
        document.removeEventListener('click', enableAudio);
      };
      
      document.addEventListener('touchstart', enableAudio, { once: true });
      document.addEventListener('click', enableAudio, { once: true });
      
      // Handle orientation changes for mobile
      window.addEventListener('orientationchange', () => {
        setTimeout(() => {
          // Recalculate positions after orientation change
          const isMobile = window.innerWidth <= 768;
          shapes.forEach((shape, index) => {
            const angle = (index / shapes.length) * Math.PI * 2;
            const radius = isMobile ? Math.random() * 80 + 100 : Math.random() * 120 + 140;
            const startX = Math.cos(angle) * radius;
            const startY = Math.sin(angle) * radius;
            
            if (shape.style.opacity !== '0') {
              gsap.set(shape, { x: startX, y: startY });
            }
          });
        }, 100);
      });
      
      // Performance optimization for low-end devices
      const isLowEndDevice = () => {
        return navigator.hardwareConcurrency <= 2 || 
               navigator.deviceMemory <= 2 ||
               /Android.*Chrome/.test(navigator.userAgent);
      };
      
      if (isLowEndDevice()) {
        // Reduce animation complexity on low-end devices
        document.body.style.animationDuration = '30s';
        gsap.globalTimeline.timeScale(0.8);
      }
      
      // Prevent zoom on double tap (iOS Safari)
      let lastTouchEnd = 0;
      document.addEventListener('touchend', (event) => {
        const now = (new Date()).getTime();
        if (now - lastTouchEnd <= 300) {
          event.preventDefault();
        }
        lastTouchEnd = now;
      }, false);
      
      // Add subtle parallax effect on mouse move (desktop only)
      if (window.innerWidth > 768 && !('ontouchstart' in window)) {
        document.addEventListener('mousemove', (e) => {
          const xAxis = (window.innerWidth / 2 - e.pageX) / 25;
          const yAxis = (window.innerHeight / 2 - e.pageY) / 25;
          
          gsap.to('.pet-animation', {
            duration: 0.5,
            rotationY: xAxis,
            rotationX: yAxis,
            ease: "power2.out"
          });
        });
      }
    });
  </script>
</body>
</html>