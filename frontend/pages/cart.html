<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Carrito - PetStyle</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Estilos principales -->
    <link rel="stylesheet" href="../css/cart.css">
</head>
<body>
    <!-- CONTENEDOR PRINCIPAL -->
    <div class="cart-container">
        
        <!-- Header con gradiente -->
        <header class="cart-header">
            <button class="back-btn" onclick="goBack()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h1>Mi Carrito</h1>
            <button class="delete-all-btn" onclick="showClearCartModal()">
                <i class="fas fa-trash"></i>
            </button>
        </header>

        <!-- Contenido principal -->
        <div class="cart-content">
            
            <!-- Estado vacío -->
            <div id="empty-cart" class="empty-cart">
                <div class="empty-icon">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <h3>Tu carrito está vacío</h3>
                <p>Agrega algunos productos para mascotas</p>
                <button class="explore-btn" onclick="goToProducts()">
                    Explorar Productos
                </button>
            </div>

            <!-- Lista de productos en carrito -->
            <div id="cart-items" class="cart-section">
                <div class="section-header">
                    <h2><i class="fas fa-shopping-cart"></i> Mi Carrito</h2>
                    <span id="cart-counter" class="counter">0 productos</span>
                </div>
                <div id="cart-products-list" class="cart-products-list">
                    <!-- Los productos se cargarán aquí -->
                </div>
            </div>

            <!-- Código de descuento -->
            <div id="discount-section" class="discount-section">
                <div class="section-title">
                    <i class="fas fa-tag"></i>
                    <span>Código de Descuento</span>
                </div>
                <div class="discount-input-container">
                    <input type="text" id="discount-code" placeholder="Ingresa tu código">
                    <button class="apply-btn" onclick="applyDiscount()">Aplicar</button>
                </div>
                <div id="discount-message" class="discount-message"></div>
            </div>

            <!-- Opciones de envío -->
            <div id="shipping-section" class="shipping-section">
                <div class="section-title">
                    <i class="fas fa-truck"></i>
                    <span>Opciones de Envío</span>
                </div>
                <div class="shipping-options">
                    <label class="shipping-option selected">
                        <input type="radio" name="shipping" value="standard" checked>
                        <div class="option-content">
                            <div class="option-header">
                                <span class="option-name">Envío Estándar</span>
                                <span class="option-price free">Gratis</span>
                            </div>
                            <div class="option-detail">5-7 días hábiles</div>
                        </div>
                    </label>
                    
                    <label class="shipping-option">
                        <input type="radio" name="shipping" value="express">
                        <div class="option-content">
                            <div class="option-header">
                                <span class="option-name">Envío Express</span>
                                <span class="option-price">$5.99</span>
                            </div>
                            <div class="option-detail">2-3 días hábiles</div>
                        </div>
                    </label>
                    
                    <label class="shipping-option">
                        <input type="radio" name="shipping" value="priority">
                        <div class="option-content">
                            <div class="option-header">
                                <span class="option-name">Envío Prioritario</span>
                                <span class="option-price">$12.99</span>
                            </div>
                            <div class="option-detail">1-2 días hábiles</div>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Método de pago -->
            <div id="payment-section" class="payment-section">
                <div class="section-title">
                    <i class="fas fa-credit-card"></i>
                    <span>Método de Pago</span>
                </div>
                <div class="payment-options">
                    <label class="payment-option selected">
                        <input type="radio" name="payment" value="card" checked>
                        <div class="option-content">
                            <div class="payment-icon">
                                <i class="fas fa-credit-card"></i>
                            </div>
                            <div class="payment-info">
                                <span class="payment-name">Tarjeta de Crédito/Débito</span>
                                <span class="payment-detail">Visa, Mastercard, American Express</span>
                            </div>
                        </div>
                    </label>
                    
                    <label class="payment-option">
                        <input type="radio" name="payment" value="paypal">
                        <div class="option-content">
                            <div class="payment-icon">
                                <i class="fab fa-paypal"></i>
                            </div>
                            <div class="payment-info">
                                <span class="payment-name">PayPal</span>
                                <span class="payment-detail">Pago seguro con tu cuenta PayPal o tarjeta</span>
                            </div>
                        </div>
                    </label>
                    
                    <label class="payment-option">
                        <input type="radio" name="payment" value="transfer">
                        <div class="option-content">
                            <div class="payment-icon">
                                <i class="fas fa-university"></i>
                            </div>
                            <div class="payment-info">
                                <span class="payment-name">Transferencia Bancaria</span>
                                <span class="payment-detail">SPEI - Transferencia electrónica inmediata</span>
                            </div>
                        </div>
                    </label>
                    
                    <label class="payment-option">
                        <input type="radio" name="payment" value="oxxo">
                        <div class="option-content">
                            <div class="payment-icon">
                                <i class="fas fa-store"></i>
                            </div>
                            <div class="payment-info">
                                <span class="payment-name">OXXO</span>
                                <span class="payment-detail">Paga en efectivo en cualquier tienda OXXO</span>
                            </div>
                        </div>
                    </label>
                </div>
                
                <!-- Formulario de tarjeta -->
                <div id="card-form" class="card-form">
                    <div class="form-group">
                        <label>Número de Tarjeta</label>
                        <input type="text" id="card-number" placeholder="1234 5678 9012 3456" maxlength="19">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Vencimiento</label>
                            <input type="text" id="card-expiry" placeholder="MM/AA" maxlength="5">
                        </div>
                        <div class="form-group">
                            <label>CVV</label>
                            <input type="text" id="card-cvv" placeholder="123" maxlength="4">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Nombre del Titular</label>
                        <input type="text" id="card-name" placeholder="Nombre completo">
                    </div>
                </div>
                
                <!-- Formulario de PayPal -->
                <div id="paypal-form" class="paypal-form" style="display: none;">
                    <div class="form-group">
                        <label>Email de PayPal</label>
                        <input type="email" id="paypal-email" placeholder="tu-email@ejemplo.com">
                    </div>
                    <div class="paypal-note">
                        <i class="fas fa-info-circle"></i>
                        <span>Serás redirigido a PayPal para completar el pago de forma segura.</span>
                    </div>
                </div>
            </div>

            <!-- Resumen del pedido -->
            <div id="order-summary" class="order-summary">
                <div class="section-title">
                    <i class="fas fa-receipt"></i>
                    <span>Resumen del Pedido</span>
                </div>
                <div class="summary-content">
                    <div class="summary-row">
                        <span>Subtotal (<span id="summary-items">0 productos</span>)</span>
                        <span id="summary-subtotal">$0.00</span>
                    </div>
                    <div class="summary-row">
                        <span>Envío</span>
                        <span id="summary-shipping" class="free">Gratis</span>
                    </div>
                    <div class="summary-row discount-row" id="discount-row" style="display: none;">
                        <span>Descuento</span>
                        <span id="summary-discount">-$0.00</span>
                    </div>
                    <div class="summary-divider"></div>
                    <div class="summary-total">
                        <span>Total</span>
                        <span id="summary-total">$0.00</span>
                    </div>
                </div>
            </div>

            <!-- Botón de finalizar compra -->
            <div id="checkout-section" class="checkout-section">
                <button class="checkout-btn" onclick="processCheckout()">
                    <i class="fas fa-shopping-bag"></i>
                    Finalizar Compra
                </button>
            </div>

            <!-- Espaciador -->
            <div class="bottom-spacer"></div>
        </div>
    </div>

    <!-- Modal de confirmación de limpieza -->
    <div id="clear-cart-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-icon">
                <i class="fas fa-trash"></i>
            </div>
            <h3>¿Vaciar carrito?</h3>
            <p>Se eliminarán todos los productos de tu carrito</p>
            <div class="modal-actions">
                <button class="btn-cancel" onclick="closeClearCartModal()">Cancelar</button>
                <button class="btn-confirm" onclick="confirmClearCart()">Vaciar</button>
            </div>
        </div>
    </div>

    <!-- Modal de pedido realizado -->
    <div id="order-success-modal" class="modal-overlay">
        <div class="modal-content success">
            <div class="success-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h3>¡Pedido Realizado!</h3>
            <p>Tu pedido ha sido procesado exitosamente. Recibirás un email de confirmación en breve.</p>
            <div class="order-number">
                <strong>#PET-<span id="order-id"></span></strong>
            </div>
            <div class="modal-actions">
                <button class="btn-secondary" onclick="continueShoppingFromSuccess()">Seguir Comprando</button>
                <button class="btn-primary" onclick="trackOrderFromSuccess()">Rastrear Pedido</button>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="main.html" class="nav-item">
            <i class="fas fa-home"></i>
            <span>Inicio</span>
        </a>
        <a href="favorites.html" class="nav-item">
            <i class="fas fa-heart"></i>
            <span>Favoritos</span>
            <div class="notification-badge" id="nav-favorites-count">0</div>
        </a>
        <a href="cart.html" class="nav-item active">
            <i class="fas fa-shopping-cart"></i>
            <span>Carrito</span>
            <div class="notification-badge" id="nav-cart-count">0</div>
        </a>
        <a href="profile.html" class="nav-item">
            <i class="fas fa-user"></i>
            <span>Perfil</span>
        </a>
    </nav>

    <!-- Scripts -->
    <script src="../js/api.js"></script>
    <script src="../js/cart.js"></script>
</body>
</html>